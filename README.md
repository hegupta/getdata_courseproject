# Getting and Cleaning Data: Course Project

This repository contains a script (run_analysis.R) which takes the Samsung human activity recognition data as input and generates as output the tidy data set required for the Getting and Cleaning Data course-project. The tidy data-set contains averages for various mean and standard deviation measurements in the Samsung data, grouped by subject and activity. The repository also contains a code book (CodeBook.md) which provides a brief description of the structure of the output generated by run_analysis.R.

The following sub-sections provide a brief description of the high-level steps followed in run_analysis.R for generating the final output.

## Merging of training and test-data sets

The training and test data-sets are each split into 3 parts in the raw Samsung data: subject IDs, activity IDs and feature measurements. The script creates a single merged data-set over the training and test data as follows:
* For each of the training and test data sets, create a unified data-frame with the subject ID as column 1, activity ID as column 2 and measurement values as the remaining columns.
* Perform a row-bind on the unified training and test data sets to get a single merged data frame spanning both training and test data.

## Extraction of mean and standard deviation measurements

The names of the features being measured can be found in the features.txt file. The script loads this file into a table, extracts the column corresponding to the feature names, and then finds the indices of the features corresponding to mean and standard deviation measurements. As per the information in features_info.txt, these are the features whose names contain mean()
or std(), so the script uses grep for determining the indices of the features which match this pattern. Since there is a direct relationship between these indices and column numbers in the merged data-set obtained previously, the script then uses these indices for extracting only the mean and standard deviation columns from the merged data-set (along with subject and activity columns) and stores these columns into a smaller filtered data frame.

## Labelling of activities in data-set

The filtered data-set obtained in the previous step contains only numeric activity IDs in the activity column. Fortunately, the Samsung data provides an activity_labels.txt file which contains a mapping from activity ID to descriptive activity name. The script loads this mapping into a table and then uses a combination of sapply and mapping-table lookup for replacing the numeric values in the activity column with their more descriptive labels.

## Labelling of data-set columns with more descriptive names

The script has already used a feature-name vector earlier for determining the indices of features corresponding to mean and standard deviation measurements. The script now uses these same indices for determining the actual names of the mean and standard deviation features, and passes these names through R's make.names() function for making the names a bit more human-readable. The script then assigns descriptive names to the columns in the filtered data-set, with column 1 called "subject", column 2 called "activity" and the remaining columns named as per the human-readable mean and std. deviation feature names just obtained.

## Creation of tidy data-set with measurement averages grouped by activity and subject

In its final phase, the script takes the filtered data-set and converts it into a new tidy data-set containing averages of mean and standard deviation measurements, grouped by subject and activity. This is done as follows:
* Use split to break the filtered data-set into a list of smaller data-frames, with each data-frame in the list corresponding to a specific subject-activity combination.
* Use lapply to transform each data-frame in this list into a single row. The first column of the row is the subject corresponding to the data-frame's group, the second column is the activity corresponding to the data-frame's group and the remaining columns are the averages of the measurement columns in the data-frame (obtained using colMeans).
* Use rbind to convert this list of rows into a data-frame which is the final output of the script.

It should be noted that the tidy data-set generated by the script follows the *wide format*, with the average of each mean and standard deviation measurement in a separate column.